<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Formulaire Formateur</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h2 th:text="${trainer.id} ? 'Éditer Formateur' : 'Ajouter Formateur'">Ajouter Formateur</h2>
        <form th:action="@{/admin/trainers}" th:object="${trainer}" method="post">
            <input type="hidden" th:field="*{id}" />
            <div class="mb-3">
                <label for="name" class="form-label">Nom Complet</label>
                <input type="text" class="form-control" id="name" th:field="*{name}" required>
            </div>
            <div class="mb-3">
                <label for="specialty" class="form-label">Spécialité</label>
                <!-- Use specialtyEntity for binding -->
                <select class="form-select" id="specialty" th:field="*{specialtyEntity}">
                    <option value="">Sélectionner une spécialité</option>
                    <option th:each="s : ${specialties}" th:value="${s.id}" th:text="${s.name}">Java</option>
                </select>
                <!-- Keep hidden input for string compatibility if needed, but the controller handles it. 
                     Actually, if validation requires 'specialty' string not null, we might have an issue if we don't set it in JS or remove validation.
                     Trainer entity has @Column(nullable = false) private String specialty;
                     If I submit the form, specialty string will be null.
                     Solution: Make the string field nullable in Entity or set a default value in constructor, OR binding?
                     Better: Controller sets it. But JPA validation runs before save? No, save calls repo.
                     Actually, Spring MVC binding happens first. The object 'trainer' will have null 'specialty'.
                     Then we call saveTrainer.
                     If I save it, Hibernate might complain if I didn't set it.
                     I set it in the controller. So it should be fine.
                -->
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" th:field="*{email}" required>
            </div>
            <button type="submit" class="btn btn-success">Enregistrer</button>
            <a href="/admin/trainers" class="btn btn-secondary">Annuler</a>
        </form>
    </div>
</body>

</html>